$Id$

Revision history for Perl extension POE.
========================================

Changes marked with "(!!!)" may break backward compatibility.
Versions with "_xx" subversions are internal test releases.


0.05_52 1999.01.27
------------------

Added Win32 support for non-blocking sockets.  Unfortunately, the
Win32 port's select() doesn't appear to support regular files, so POE
is virtually useless for non-blocking filesystem work.  On the plus
side, sockets seem to function very well.  Thanks to Sean Puckett
(catbear) for tracking this down.


0.05_04 1999.01.15 (!!!)
------------------------

Fixed Reference.pm again.  Storable's nfreeze is portable across
networks and faster than FreezeThaw, so it's preferred.  Thanks to
Artur Bergman for pointing this out.

(!!!) Changed _child parameters.  $from is always the kernel.  ARG0 is
either 'gain' if the parent is being given a child; 'lose' if its
child is being stopped; or 'create' if the new child was created by
this session.  ARG1 is always the child session's reference.  For
created sessions, ARG2 is the return value from the child's _start
event handler.

(!!!) Changed _parent parameters.  $from is always the kernel; ARG0 is
the old parent session; and ARG1 is the new parent session.

(!!!) Changed event handler parameter order, and introduced a way to
avoid future changes in the parameter order from breaking
compatibility.

Updated tests/*.perl examples to work with the new scheme of things.
Added comments, and generally cleaned things up.

Sessions' _start events may now include parameters.  The selects.perl
test is the first program to use this.

Wheels now call event handlers directly instead of posting events.
This should make things substantially faster.

(!!!) Changed filters' return values, to make them more compatible
with block and datagram protocols.  Most people won't notice the
difference, but this will break compatibility for Filter and Driver
writers.


0.05_03 1999.01.14 (!!!)
------------------------

Fixed Kernel select dispatching.  Changing $_ in event handlers would
cause a fatal error.

Fixed Reference.pm.  Frozen references were not being thawed correctly
under two conditions: If packet boundaries split them in certain
places, and later if they contained \n.  Thanks to sky and a-mused for
finding this one.

(!!!) Fixed Kernel.pm signal handlers.  The kernel now waits on
SIGCHLD and only generates a CHLD signal event if the child PID is 0
or more.  The CHLD signal now includes the PID and $? as parameters.
The only programs that break are ones that explicitly wait.  It also
always generates SIGCHLD/SIGCLD events as "CHLD" to simplify handlers.

Fixed Kernel event dispatching so that events generated by select() no
longer outpace Kernel::run's ability to dispatch them.  Thanks to Dave
Paris for finding this.

Fixed SysRW.pm to flush as much data as possible all at once.  This
should reduce events and overhead when sending a lot of data.  Thanks
to Dave Paris for pointing this out.

Added new tests.


0.05_02 1999.01.12 (!!!)
------------------------

Fixed signals.  Now runs garbage collection on sessions after
execution returns from non-terminal signal handlers.

Fixed README, Changes, etc. to be more readable.  I hope.

Added tests/thrash.perl to check for memory leaks and benchmark
"performance".

(!!!) Changed "exception" to "expedite", with regard to Kernel select
functions.

The thrash.perl results look pretty bad, and DProf blamed IO::Select,
so out it went.

Revised internal data structures to be more efficient.

(!!!) Removed support for multiple kernels, each to its own thread.
See the 0.05 SIGPIPE notes.

Rewrote documentation.  Split it from individual packages, and placed
it into its own pod file.

Added return values for Kernel::alias_* functions.

Localized $SIG{'__DIE__'} in "harmless" evals.

Inlined Kernel::_kernel_select().

Added Artur Bergman's support for "package" sessions, and
packagesessions.perl test.

(!!!) Fixed Filter::Line::put() to treat @_ as an array of lines.
This brings Filter::Line::put() into agreement with the documentation.

Added Filter::Stream, a "null" filter that passes data through
unchanged.

Added Kernel::yield.

Removed IO::Handle dependencies in the Kernel.  Now it will work with
plain old files as well.

Added return values for Kernel::state.

Created Wheel::SocketFactory, a replacement for IO::Socket::INET (tcp
only so far) and IO::Socket::UNIX.  All it does in create sockets,
though... the sockets don't have IO::Socket-style methods.

Made FreezeThaw the default for Filter::Reference, and issued a
mandatory warning if Storable is used.  Objects frozen with Storable
are not thawable on different-endian systems.


0.05 1998.12.04
---------------

Delayed garbage collection on new sessions.  Previously, sessions
would be tested for garbage collection immediately after creation.

Fixed a fatal bug in tests/proxy.perl.  Added ability to redirect
multiple ports.  Added more logging information.

Fixed SIGPIPE handling.  Previously, SIGPIPE would be dispatched to
every Session.  Now it is dispatched directly to the session that was
running when the signal occurred.  This probably breaks multithreaded
programs that contain multiple kernels, and I am considering dropping
multi-kernel support.

Fixed SIGRTMIN handling.  At least one system has this signal defined
in %SIG but doesn't support it.  Assigning to $SIG{'RTMIN'} there
causes an "Attempt to free unreferenced scalar" warning, and the test
program hangs.  POE now skips RTMIN and RTMAX when assigning handlers.

Added Filter::Reference, contributed by Artur Bergman
<artur@vogon-solutions.com>.  Filter::References enables POE to pass
copies of referenced data between processes.  It requires C<Storable>
or C<FreezeThaw>.

Fixed Wheel::ReadWrite::put().  It used to send a concatenated version
of @_ to its driver.  This broke Filter::Reference when putting a list
of references.  Now it's up to respective Filter classes to do the
right thing with @_.

Fixed Wheel::ReadWrite.  Now it sends FlushedState events when it
should.


0.04 1998.11.24
---------------

Added $object->can($state) check when registering object methods as
states/event handlers.

Added Session aliases (symbolic references).  See tests/names.perl for
an example.

Added Kernel::signal($session, $name).  This sends signals directly to
POE::Sessions or POE::Kernels without going to the operating system
(which would send the signal to every kernel and session).  The
signals.perl test has been updated to test this.

Added Kernel::call().  Takes the same parameters as Kernel::post, but
dispatches the state/event immediately.  Returns whatever the event
handler did.  The sessions.perl test test has been updated to test
this.


0.031 1998.11.24
----------------

Added tests/objsessions.perl to the manifest.  D'oh!


0.03  1998.11.23
----------------

Added new constructor syntax to POE::Session.  It's now possible to
say: new POE::Session($kernel, $object, \@methods).  See
tests/objsession.perl for an example.

Removed an unnecessary function call in Kernel.pm.

Rearranged Changes so the most recent ones come first.


0.02  1998.11.22
----------------

Rewrote signals.  Signals now propagate from parent to child sessions.
"Terminal" signals now only kill sessions that don't otherwise handle
them.

Added subsecond resolution for alarms if Time::HiRes is available.
See the docs for POE::Kernel::alarm().

Added POE::Kernel::delay() for "time() + $seconds" alarms.  Uses
Kernel's time(), which may be from Time::HiRes.

Parent sessions will now wait around until all child sessions finish,
unless they're explicitly killed off.

Fixed a blessing bleed that caused implicitly returned objects to die
in the wrong scope (confounding resource management).

Added tests/proxy.perl, a simple line-based proxy example.


0.01  1998.08.15
----------------

Initial release.  Implemented Kernel, Session, Wheel, Driver, Filter.


- EOF: Thank you for reading. -